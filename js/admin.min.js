"use strict";function pprf_resize_iframe(e){e.style.height=e.contentWindow.document.body.scrollHeight+"px"}function pprf_update_iframe_size(e,a){""!=e&&jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:a},500)}function pprf_update_size(e){var a;""!=e&&(a=jQuery(e+" html #wpbody-content").height()+60,jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:a},500))}function pprf_update_parent_iframe(e){var a;""!=e&&(a=jQuery("#"+e+" html #wpbody-content").height(),jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:a},500))}var pprf_parent_height=jQuery("html").height();function pprf_new(r,d,t,p,i,s,n){var e;!1===isNaN(r)&&!1===isNaN(t)&&!1===isNaN(p)&&!1===isNaN(s)&&(e={podid:r,postid:d,cpodid:t,authorid:p,poditemid:s,action:"admin_pprf_load_newly_added",security:ajax_script.nonce},jQuery("#panda-repeater-fields-"+t+"-"+s+"-loader").removeClass("hidden"),jQuery.post(ajax_script.ajaxurl,e,function(e){jQuery("#panda-repeater-fields-"+t+"-"+s+"-loader").addClass("hidden");var a=e.data;!0===e.success&&void 0!==a.id&&!1===isNaN(a.id)&&(e=pprf_build_item_html(a,r,d,t,p,i,s,n,!1),jQuery("#panda-repeater-fields-"+t+"-"+s+" .pprf-redorder-list").append(e),a=jQuery("#panda-repeater-fields-"+t+"-"+s+" > .pprf-redorder-list > li").length,0!=(e=parseInt(jQuery("#panda-repeater-fields-"+t+"-"+s+"-entry-limit").val()))&&e<=a&&jQuery("#panda-repeater-fields-"+t+"-"+s+"-add-new").addClass("hidden")),jQuery("#panda-repeater-fields-tabs-"+t+"-"+s+" .pprf-tab .dashicons-portfolio").click(),pprf_odd_even_color(t+"-"+s)}))}function pprf_build_item_html(e,a,r,d,t,p,i,s,n){if(void 0===e.id||!0===isNaN(e.id)||!0===isNaN(a))return"";var o="",l="pprf-btn-delete",f="",c="dashicons-edit";1==jQuery("#panda-repeater-trash-info-"+d+"-"+i).data("enable-trash")&&(void 0!==e.trashed&&1==e.trashed?(o="pprf-trashed",l="pprf-btn-trashed",c="dashicons-update ",jQuery("#panda-repeater-fields-tabs-"+d+"-"+i+" .pprf-tab.active .dashicons").hasClass("dashicons-portfolio")&&(f="display:none;")):(o="pprf-not-trashed",l="pprf-btn-not-trashed",jQuery("#panda-repeater-fields-tabs-"+d+"-"+i+" .pprf-tab.active .dashicons").hasClass("dashicons-trash")&&(f="display:none;")));var h="";1==n&&(h="-repeated");var u=d+"-"+e.id+"-"+i,_=e.id,m=e.title;void 0!==e.label&&""!=e.label&&(m=e.label);var y=jQuery("#next-bg").data("bg"),e=PANDA_PODS_REPEATER_PAGE_URL[0]+"iframe_id=panda-repeater-edit-"+u+"&podid="+a+"&tb="+d+"&postid="+r+"&itemid="+_+"&poditemid="+i+"&pprf_nonce="+PANDA_PODS_REPEATER_CONSTANTS.nonce,m='<li data-id="'+_+'" class="'+o+'" id="li-'+u+h+'" style="'+f+'"><div class="pprf-row  w100 pprf-left"><div class="w100 pprf-left" id="pprf-row-brief-'+u+h+'"><div class="pprf-left pd8 pprf-left-col '+y+' ">'+m+"</div>";return m+=1==n?'<div class="button pprf-right-col center pprf-dismiss-btn  '+l+'" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'"  data-poditemid="'+i+'" data-target="'+u+'" ><span class="dashicons dashicons-dismiss pdt6 mgb0 "></span></div><div class="pprf-left pd8">Repeated</div>':'<div class="button pprf-right-col center pprf-trash-btn  '+l+'" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'"  data-poditemid="'+i+'" data-target="'+u+'" ><span class="dashicons dashicons-trash pdt6 mgb0 "></span><div id="panda-repeater-trash-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_CONSTANTS.url+'/images/dots-loading.gif" alt="loading" class="mgl8 loading pprf-left"/></div></div><div class="button pprf-right-col center pprf-save-btn" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'" data-poditemid="'+i+'" data-target="'+u+'" ><img src = "'+PANDA_PODS_REPEATER_CONSTANTS.url+'images/save-icon-tran.png" class="pprf-save-icon  mgt8 mgb2"/><div id="panda-repeater-save-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_CONSTANTS.url+'images/dots-loading.gif" alt="loading" class="mgl8 pprf-left"/></div></div><div class="button pprf-edit pprf-row-load-iframe alignright pprf-right-col center pprf-edit-btn" role="button" data-target="'+u+'" data-url="'+e+'"><span class="dashicons '+c+' pdt8 mgb0 pprf-edit-span"></span><div id="panda-repeater-edit-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_CONSTANTS.url+'/images/dots-loading.gif" alt="loading" class="mgl9 pprf-left"/></div>\t</div>',m+='</div><div><iframe id="panda-repeater-edit-'+u+'" frameborder="0" scrolling="no" src="" style="display:none; " class="panda-repeater-iframe w100"></iframe><div id="panda-repeater-edit-expand-'+u+'" class="w100 pprf-left center pdt3 pdb3 pprf-expand-bar pprf-edit-expand" data-target="'+u+'"  style="display:none;">Content missing? Click here to expand</div></div></div></li>',"pprf-purple-bg"===y?jQuery("#next-bg").data("bg","pprf-white-bg"):jQuery("#next-bg").data("bg","pprf-purple-bg"),m}function pprf_delete_item(e,a,t,p,r,i,s,n){!1===isNaN(e)&&!1===isNaN(t)&&!1===isNaN(r)&&!1===isNaN(p)&&!1===isNaN(s)&&(a={podid:e,postid:a,cpodid:t,itemid:p,authorid:r,poditemid:s,action:"admin_pprf_delete_item",trash:n,security:ajax_script.nonce},r="",0==n&&(r=strs_obj.be_restored),1==n&&(r=strs_obj.can_recover),2==n&&(r=strs_obj.be_deleted),a=a,!0===confirm(strs_obj.you_sure+" "+r)&&((0==n?jQuery("#panda-repeater-edit-"+t+"-"+p+"-"+s+"-loader"):jQuery("#panda-repeater-trash-"+t+"-"+p+"-"+s+"-loader")).removeClass("hidden"),jQuery.post(ajax_script.ajaxurl,a,function(e){var a,r,d;!0===e.success&&0!=e.data.length&&(r="panda-repeater-edit-expand-"+(d=t+"-"+p+"-"+s),a="panda-repeater-edit-"+d,(0==n?jQuery("#panda-repeater-edit-"+t+"-"+p+"-"+s+"-loader"):jQuery("#panda-repeater-trash-"+t+"-"+p+"-"+s+"-loader")).addClass("hidden"),0==n&&(jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-row-load-iframe .pprf-edit-span').removeClass("dashicons-update"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-row-load-iframe .pprf-edit-span').addClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').removeClass("pprf-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').addClass("pprf-not-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').css("display","none"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-trash-btn').addClass("pprf-btn-not-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-trash-btn').removeClass("pprf-btn-trashed"),""!=jQuery.trim(jQuery("#"+a).contents().find("body").html())&&jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-save-btn .pprf-save-icon').attr("src",PANDA_PODS_REPEATER_CONSTANTS.url+"images/save-icon.png")),1==n&&("undefined"!=jQuery("#"+a)&&jQuery("#"+a).hide(),"undefined"!=jQuery("#"+r)&&jQuery("#"+r).hide(),jQuery("#pprf-row-brief-"+d+" .dashicons").removeClass("dashicons-arrow-up"),jQuery("#pprf-row-brief-"+d+" .dashicons").addClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').removeClass("pprf-not-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').addClass("pprf-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').css("display","none"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-row-load-iframe .pprf-edit-span').addClass("dashicons-update"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-row-load-iframe .pprf-edit-span').removeClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-trash-btn').addClass("pprf-btn-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-trash-btn').removeClass("pprf-btn-not-trashed"),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"] .pprf-save-btn .pprf-save-icon').attr("src",PANDA_PODS_REPEATER_CONSTANTS.url+"images/save-icon-tran.png")),2==n&&(jQuery("#panda-repeater-fields-"+t+"-"+s+" #"+i).parent().parent().remove(),jQuery("#panda-repeater-fields-"+t+"-"+s+' .pprf-redorder-list li[data-id="'+p+'"]').remove(),r=jQuery("#panda-repeater-fields-"+t+"-"+s+" > .pprf-redorder-list > li").length,0!=(d=parseInt(jQuery("#panda-repeater-fields-"+t+"-"+s+"-entry-limit").val()))&&r<d&&jQuery("#panda-repeater-fields-"+t+"-"+s+"-add-new").removeClass("hidden"),"undefined"!=typeof call_simpods&&jQuery.isFunction(call_simpods)&&call_simpods(e)),pprf_odd_even_color(t+"-"+s))})))}function pprf_load_more(o,e){var l=new Array;jQuery("#panda-repeater-fields-"+o+" .pprf-redorder-list li").each(function(e){l[e]=parseInt(jQuery(this).data("id"))});var f={action:"admin_pprf_load_more",loaded:l,security:ajax_script.nonce,pod_id:e.data("podid"),post_id:e.data("postid"),saved_tb:e.data("tb"),iframe_id:e.data("iframe_id"),pod_item_id:e.data("poditemid"),authorid:e.data("userid"),cp_title:e.data("cptitle"),trashable:e.data("enable-trash"),order:e.data("order"),order_by:e.data("order-by"),amount:jQuery("#panda-repeater-amount-"+o).val(),start:jQuery("#panda-repeater-start-from-"+o).val()};jQuery("#pprf-load-more-wrap-"+o+" .pprf-load-more-report").text(""),jQuery.post(ajax_script.ajaxurl,f,function(e){var a="";if(1==e.success){for(var r=0,d=e.data.length,t=l.length,p=0;p<d;p++){var i=!1;if("append_to"===jQuery("#pprf-load-more-wrap-"+o+" .panda-repeater-to-load").val())for(var s=0;s<t;s++)if(parseInt(e.data[p].id)==l[s]){i=!0;break}a+=pprf_build_item_html(e.data[p],f.pod_id,f.post_id,f.saved_tb,f.authorid,f.iframe_id,f.pod_item_id,f.cp_title,i),1==e.data[p].trashed&&r++}var n=e.data.length;1==f.trashable&&(n=parseInt(e.data.length)-r+" published, "+r+" trashed."),"append_to"==jQuery("#pprf-load-more-wrap-"+o+" .panda-repeater-to-load").val()?jQuery("#panda-repeater-fields-"+f.saved_tb+"-"+f.pod_item_id+" .pprf-redorder-list").append(a):jQuery("#panda-repeater-fields-"+f.saved_tb+"-"+f.pod_item_id+" .pprf-redorder-list").html(a),pprf_odd_even_color(f.saved_tb+"-"+f.pod_item_id),jQuery("#pprf-load-more-wrap-"+o+" .pprf-ajax-img").css("display","none"),0!=e.data.length&&jQuery("#panda-repeater-start-from-"+o).val(parseInt(f.start)+parseInt(e.data.length)),jQuery("#pprf-load-more-wrap-"+o+" .pprf-load-more-report").text(" | Loaded "+n)}})}function pprf_odd_even_color(e){jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").removeClass("pprf-purple-bg"),jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").removeClass("pprf-white-bg"),0==jQuery("#panda-repeater-fields-tabs-"+e).length&&jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").each(function(e){e%2==0?jQuery(this).addClass("pprf-white-bg"):jQuery(this).addClass("pprf-purple-bg")}),jQuery("#panda-repeater-fields-"+e+" .pprf-not-trashed").each(function(e){e%2==0?jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-white-bg"):jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-purple-bg")}),jQuery("#panda-repeater-fields-"+e+" .pprf-trashed").each(function(e){e%2==0?jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-white-bg"):jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-purple-bg")})}function pprf_reassign(e,a,r){jQuery("#panda-repeater-fields-"+e+"-"+a+' .pprf-redorder-list li[data-id="'+r+'"]').remove(),pprf_odd_even_color(e+"-"+a)}jQuery(document).on("click",".pprf-redorder-btn",function(e){var a=jQuery(this).data("id");jQuery(this).addClass("hidden"),jQuery(this).parent().children(".pprf-save-redorder-btn").removeClass("hidden"),jQuery(this).parent().children(".pprf-redorder-list-wrap").removeClass("hidden"),jQuery(this).parent().children(".pprf-row").addClass("hidden"),jQuery("#"+a+"-add-new").addClass("hidden")}),jQuery(document).on("click",".pprf-save-redorder-btn",function(e){var a=jQuery(this).data("id");jQuery(this).addClass("hidden"),jQuery(this).parent().children(".pprf-redorder-list-wrap").addClass("hidden"),jQuery(this).parent().children(".pprf-save-redorder-btn").addClass("hidden"),jQuery(this).parent().children(".pprf-redorder-btn").removeClass("hidden"),jQuery(this).parent().children(".pprf-row").removeClass("hidden"),jQuery("#"+a+"-add-new").removeClass("hidden")}),jQuery(document).on("click",".pprf-load-more-btn",function(e){e.preventDefault(),jQuery("#pprf-load-more-wrap-"+jQuery(this).data("target")+" .pprf-ajax-img").css("display","block"),pprf_load_more(jQuery(this).data("target"),jQuery(this))}),jQuery(document).ready(function(i){0!=i(".pprf-redorder-list.pandarf_order").length&&i(".pprf-redorder-list.pandarf_order").sortable({helper:function(e,a){var r=a.children(),a=a.clone();return a.children().each(function(e){i(this).width(r.eq(e).width())}),a},cursor:"move",opacity:.7,tolerance:"intersect",update:function(){var e={action:"admin_pprf_update_order",order:i(this).sortable("toArray"),security:ajax_script.nonce};i.post(ajax_script.ajaxurl,e,function(e){pprf_odd_even_color(e.data.pprf_id)})},cancel:".pprf-row-load-iframe, .pprf-save-btn, pprf-trash-btn",handle:".pprf-left-col"}),i(document.body).on("click",".pprf-row-load-iframe",function(e){e.stopPropagation();var a,r=i(this).data("url"),d=i(this).data("target"),t="panda-repeater-edit-expand-"+d,p="panda-repeater-edit-"+d,e=i(this).parent().children(".pprf-trash-btn");i(this).children(".pprf-edit-span").hasClass("dashicons-update")?pprf_delete_item(e.data("podid"),e.data("postid"),e.data("tb"),e.data("itemid"),e.data("userid"),e.data("iframe_id"),e.data("poditemid"),0):(a=" .pprf-edit",i(this).hasClass("pprf-add")&&(a=".pprf-add",p="panda-repeater-add-new-"+d,t="panda-repeater-add-new-expand-"+d),i("#pprf-row-brief-"+d+" .dashicons").hasClass("dashicons-edit")?(""==i("#"+p).attr("src")&&(i("#"+p).attr("src",r),i("#"+p+"-loader").removeClass("hidden")),i("#"+p).show("slow",function(){i("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-arrow-up"),i("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-edit")}),i("#"+t).show(),i("#"+p).on("load",function(){i("#"+p+"-loader").addClass("hidden"),i("#panda-repeater-save-"+d+"-loader").parent().children(".pprf-save-icon").attr("src",PANDA_PODS_REPEATER_CONSTANTS.url+"/images/save-icon.png"),i("#panda-repeater-save-"+d+"-loader").parent().addClass("pprf-btn-ready"),i("#panda-repeater-save-"+d+"-loader").addClass("hidden"),i("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-arrow-up"),i("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-edit")})):(i("#"+p).hide("slow",function(){i("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-arrow-up"),i("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-edit")}),i("#"+t).hide()),i("#pprf-row-brief-"+d+" .dashicons-trash").removeClass("dashicons-arrow-up"))}),i(document.body).on("click",".pprf-expand-bar",function(){var e=i(this).data("target"),a="panda-repeater-edit-"+e;i(this).hasClass("pprf-add-expand")&&(a="panda-repeater-add-new-"+e),void 0!==document.getElementById(a)&&void 0!==document.getElementById(a).contentWindow.pprf_resize_window&&document.getElementById(a).contentWindow.pprf_resize_window()}),i(document.body).on("click",".pprf-trash-btn",function(e){e.stopPropagation();e=i(this).data("target");i(this).hasClass("pprf-add-expand");e=0;i(this).hasClass("pprf-btn-not-trashed")&&(e=1),i(this).hasClass("pprf-btn-trashed")&&(e=2),i(this).hasClass("pprf-btn-delete")&&(e=2),pprf_delete_item(i(this).data("podid"),i(this).data("postid"),i(this).data("tb"),i(this).data("itemid"),i(this).data("userid"),i(this).data("iframe_id"),i(this).data("poditemid"),e)}),i(document.body).on("click",".pprf-save-btn",function(e){var a;e.stopPropagation(),i(this).hasClass("pprf-btn-ready")&&(e="panda-repeater-edit-"+(a=i(this).data("target")),i(this).hasClass("pprf-save-new-btn")&&(e="panda-repeater-add-new-"+a),i("#panda-repeater-save-"+a+"-loader").removeClass("hidden"),i("#"+e).contents().find(".pods-submit-button").trigger("click"),pprf_is_changed=!1)}),i(".toplevel_page_panda-pods-repeater-field .pods-field-input").on("click keyup change",function(){pprf_is_changed=!0}),i(document).on("click","#publishing-action .button, #save-action .button",function(){if(pprf_is_changed){evt.preventDefault();var e=confirm(strs_obj.Ignore_changes);if(1==e&&(pprf_is_changed=!1,i(this).trigger("click")),0==e)return!1}}),i(document.body).on("click",".pprf-tab .dashicons-trash",function(){i("#panda-repeater-fields-"+i(this).parent().data("target")+" .pprf-trashed").css("display","block"),i("#panda-repeater-fields-"+i(this).parent().data("target")+" .pprf-not-trashed").css("display","none"),i(this).parent().parent().children(".active").removeClass("active"),i(this).parent().addClass("active"),pprf_odd_even_color(i(this).parent().data("target"))}),i(document.body).on("click",".pprf-tab .dashicons-portfolio",function(){i("#panda-repeater-fields-"+i(this).parent().data("target")+" .pprf-trashed").css("display","none"),i("#panda-repeater-fields-"+i(this).parent().data("target")+" .pprf-not-trashed").css("display","block"),i(this).parent().parent().children(".active").removeClass("active"),i(this).parent().addClass("active"),pprf_odd_even_color(i(this).parent().data("target"))}),i(document.body).on("click",".pprf-dismiss-btn",function(){i("#li-"+i(this).data("target")+"-repeated").remove()})});var pprf_is_changed=!1;
//# sourceMappingURL=admin.min.js.map
