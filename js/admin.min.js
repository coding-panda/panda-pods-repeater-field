"use strict";function pprf_resizeIframe_fn(e){e.style.height=e.contentWindow.document.body.scrollHeight+"px"}function pprf_updateIframeSize_fn(e,a){""!=e&&jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:a},500)}function pprf_updateSize_fn(e){""!=e&&(jQuery(e+" html #wpbody-content").height(),jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:pprf_orgHei_int},500))}function pprf_updateParentIframe_fn(e){var a;""!=e&&(a=jQuery("#"+e+" html #wpbody-content").height(),jQuery("#"+e).height(jQuery("#"+e).height()).animate({height:a},500))}var pprfParentHei_int=jQuery("html").height();function pprf_new_fn(p,i,s,n,o,l,f){var e;jQuery.isNumeric(p)&&jQuery.isNumeric(s)&&jQuery.isNumeric(n)&&jQuery.isNumeric(l)&&(e={podid:p,postid:i,cpodid:s,authorid:n,poditemid:l,action:"admin_pprf_load_newly_added_fn",security:ajax_script.nonce},jQuery("#panda-repeater-fields-"+s+"-"+l+"-loader").removeClass("hidden"),jQuery.post(ajax_script.ajaxurl,e,function(e){jQuery("#panda-repeater-fields-"+s+"-"+l+"-loader").addClass("hidden");var a,r,d,t=e.data;!0===e.success&&void 0!==t.id&&jQuery.isNumeric(t.id)&&(a=item_html_fn(t,p,i,s,n,o,l,f,!1),jQuery("#panda-repeater-fields-"+s+"-"+l+" .pprf-redorder-list").append(a),r=jQuery("#panda-repeater-fields-"+s+"-"+l+" > .pprf-redorder-list > li").length,0!=(d=parseInt(jQuery("#panda-repeater-fields-"+s+"-"+l+"-entry-limit").val()))&&d<=r&&jQuery("#panda-repeater-fields-"+s+"-"+l+"-add-new").addClass("hidden")),jQuery("#panda-repeater-fields-tabs-"+s+"-"+l+" .pprf-tab .dashicons-portfolio").click(),pprf_odd_even_color_fn(s+"-"+l)}))}function item_html_fn(e,a,r,d,t,p,i,s,n){if(void 0===e.id||!jQuery.isNumeric(e.id))return"";var o="",l="pprf-btn-delete",f="",c="dashicons-edit";1==jQuery("#panda-repeater-trash-info-"+d+"-"+i).data("enable-trash")&&(void 0!==e.trashed&&1==e.trashed?(o="pprf-trashed",l="pprf-btn-trashed",c="dashicons-update ",jQuery("#panda-repeater-fields-tabs-"+d+"-"+i+" .pprf-tab.active .dashicons").hasClass("dashicons-portfolio")&&(f="display:none;")):(o="pprf-not-trashed",l="pprf-btn-not-trashed",jQuery("#panda-repeater-fields-tabs-"+d+"-"+i+" .pprf-tab.active .dashicons").hasClass("dashicons-trash")&&(f="display:none;")));var h="";1==n&&(h="-repeated");var u=d+"-"+e.id+"-"+i,_=e.id,m=e.title,y="<strong>ID:</strong> "+_+" <strong>"+e.pprf_name_label+": </strong> "+m;void 0!==e.label&&""!=e.label&&(y=e.label);var b=jQuery("#next-bg").data("bg"),v=PANDA_PODS_REPEATER_PAGE_URL+"iframe_id=panda-repeater-edit-"+u+"&podid="+a+"&tb="+d+"&postid="+r+"&itemid="+_+"&poditemid="+i,j='<li data-id="'+_+'" class="'+o+'" id="li-'+u+h+'" style="'+f+'"><div class="pprf-row  w100 pprf-left"><div class="w100 pprf-left" id="pprf-row-brief-'+u+h+'"><div class="pprf-left pd8 pprf-left-col '+b+' ">'+y+"</div>";return j+=1==n?'<div class="button pprf-right-col center pprf-dismiss-btn  '+l+'" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'"  data-poditemid="'+i+'" data-target="'+u+'" ><span class="dashicons dashicons-dismiss pdt6 mgb0 "></span></div><div class="pprf-left pd8">Repeated</div>':'<div class="button pprf-right-col center pprf-trash-btn  '+l+'" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'"  data-poditemid="'+i+'" data-target="'+u+'" ><span class="dashicons dashicons-trash pdt6 mgb0 "></span><div id="panda-repeater-trash-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_URL+'/images/dots-loading.gif" alt="loading" class="mgl8 loading pprf-left"/></div></div><div class="button pprf-right-col center pprf-save-btn" role="button" data-podid="'+a+'"  data-postid="'+r+'"  data-tb="'+d+'"  data-itemid="'+_+'"  data-userid="'+t+'"  data-iframe_id="panda-repeater-edit-'+u+'" data-poditemid="'+i+'" data-target="'+u+'" ><img src = "'+PANDA_PODS_REPEATER_URL+'images/save-icon-tran.png" class="pprf-save-icon  mgt8 mgb2"/><div id="panda-repeater-save-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_URL+'images/dots-loading.gif" alt="loading" class="mgl8 pprf-left"/></div></div><div class="button pprf-edit pprf-row-load-iframe alignright pprf-right-col center pprf-edit-btn" role="button" data-target="'+u+'" data-url="'+v+'"><span class="dashicons '+c+' pdt8 mgb0 pprf-edit-span"></span><div id="panda-repeater-edit-'+u+'-loader" class="pprf-left hidden mgl5"><img src = "'+PANDA_PODS_REPEATER_URL+'/images/dots-loading.gif" alt="loading" class="mgl9 pprf-left"/></div>\t</div>',j+='</div><div><iframe id="panda-repeater-edit-'+u+'" frameborder="0" scrolling="no" src="" style="display:none; " class="panda-repeater-iframe w100"></iframe><div id="panda-repeater-edit-expand-'+u+'" class="w100 pprf-left center pdt3 pdb3 pprf-expand-bar pprf-edit-expand" data-target="'+u+'"  style="display:none;">Content missing? Click here to expand</div></div></div></li>',"pprf-purple-bg"==b?jQuery("#next-bg").data("bg","pprf-white-bg"):jQuery("#next-bg").data("bg","pprf-purple-bg"),j}function pprf_delete_item_fn(e,a,i,s,r,n,o,l){var d,t,p;jQuery.isNumeric(e)&&jQuery.isNumeric(i)&&jQuery.isNumeric(r)&&jQuery.isNumeric(s)&&jQuery.isNumeric(o)&&(d={podid:e,postid:a,cpodid:i,itemid:s,authorid:r,poditemid:o,action:"admin_pprf_delete_item_fn",trash:l,security:ajax_script.nonce},t="",0==l&&(t=strs_obj.be_restored),1==l&&(t=strs_obj.can_recover),2==l&&(t=strs_obj.be_deleted),p=d,1==confirm(strs_obj.you_sure+" "+t)&&(0==l?jQuery("#panda-repeater-edit-"+i+"-"+s+"-"+o+"-loader").removeClass("hidden"):jQuery("#panda-repeater-trash-"+i+"-"+s+"-"+o+"-loader").removeClass("hidden"),jQuery.post(ajax_script.ajaxurl,p,function(e){var a,r,d,t,p;!0===e.success&&0!=e.data.length&&(r="panda-repeater-edit-expand-"+(a=i+"-"+s+"-"+o),d="panda-repeater-edit-"+a,0==l?jQuery("#panda-repeater-edit-"+i+"-"+s+"-"+o+"-loader").addClass("hidden"):jQuery("#panda-repeater-trash-"+i+"-"+s+"-"+o+"-loader").addClass("hidden"),0==l&&(jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-row-load-iframe .pprf-edit-span').removeClass("dashicons-update"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-row-load-iframe .pprf-edit-span').addClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').removeClass("pprf-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').addClass("pprf-not-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').css("display","none"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-trash-btn').addClass("pprf-btn-not-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-trash-btn').removeClass("pprf-btn-trashed"),""!=jQuery.trim(jQuery("#"+d).contents().find("body").html())&&jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-save-btn .pprf-save-icon').attr("src",PANDA_PODS_REPEATER_URL+"images/save-icon.png")),1==l&&("undefined"!=jQuery("#"+d)&&jQuery("#"+d).hide(),"undefined"!=jQuery("#"+r)&&jQuery("#"+r).hide(),jQuery("#pprf-row-brief-"+a+" .dashicons").removeClass("dashicons-arrow-up"),jQuery("#pprf-row-brief-"+a+" .dashicons").addClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').removeClass("pprf-not-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').addClass("pprf-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').css("display","none"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-row-load-iframe .pprf-edit-span').addClass("dashicons-update"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-row-load-iframe .pprf-edit-span').removeClass("dashicons-edit"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-trash-btn').addClass("pprf-btn-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-trash-btn').removeClass("pprf-btn-not-trashed"),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"] .pprf-save-btn .pprf-save-icon').attr("src",PANDA_PODS_REPEATER_URL+"images/save-icon-tran.png")),2==l&&(jQuery("#panda-repeater-fields-"+i+"-"+o+" #"+n).parent().parent().remove(),jQuery("#panda-repeater-fields-"+i+"-"+o+' .pprf-redorder-list li[data-id="'+s+'"]').remove(),t=jQuery("#panda-repeater-fields-"+i+"-"+o+" > .pprf-redorder-list > li").length,0!=(p=parseInt(jQuery("#panda-repeater-fields-"+i+"-"+o+"-entry-limit").val()))&&t<p&&jQuery("#panda-repeater-fields-"+i+"-"+o+"-add-new").removeClass("hidden"),"undefined"!=typeof call_simpods_fn&&jQuery.isFunction(call_simpods_fn)&&call_simpods_fn(e)),pprf_odd_even_color_fn(i+"-"+o))})))}function pprf_load_more_fn(s,e){var n=new Array;jQuery("#panda-repeater-fields-"+s+" .pprf-redorder-list li").each(function(e){n[e]=parseInt(jQuery(this).data("id"))});var o={action:"admin_pprf_load_more_fn",loaded:n,security:ajax_script.nonce,pod_id:e.data("podid"),post_id:e.data("postid"),saved_tb:e.data("tb"),iframe_id:e.data("iframe_id"),pod_item_id:e.data("poditemid"),authorid:e.data("userid"),cp_title:e.data("cptitle"),trashable:e.data("enable-trash"),order:e.data("order"),order_by:e.data("order-by"),amount:jQuery("#panda-repeater-amount-"+s).val(),start:jQuery("#panda-repeater-start-from-"+s).val()};jQuery("#pprf-load-more-wrap-"+s+" .pprf-load-more-report").text(""),jQuery.post(ajax_script.ajaxurl,o,function(e){var a="";if(1==e.success){for(var r=0,d=0;d<e.data.length;d++){var t=!1;if("append_to"==jQuery("#pprf-load-more-wrap-"+s+" .panda-repeater-to-load").val())for(var p=0;p<n.length;p++)if(parseInt(e.data[d].id)==n[p]){t=!0;break}a+=item_html_fn(e.data[d],o.pod_id,o.post_id,o.saved_tb,o.authorid,o.iframe_id,o.pod_item_id,o.cp_title,t),1==e.data[d].trashed&&r++}var i=e.data.length;1==o.trashable&&(i=parseInt(e.data.length)-r+" published, "+r+" trashed."),"append_to"==jQuery("#pprf-load-more-wrap-"+s+" .panda-repeater-to-load").val()?jQuery("#panda-repeater-fields-"+o.saved_tb+"-"+o.pod_item_id+" .pprf-redorder-list").append(a):jQuery("#panda-repeater-fields-"+o.saved_tb+"-"+o.pod_item_id+" .pprf-redorder-list").html(a),pprf_odd_even_color_fn(o.saved_tb+"-"+o.pod_item_id),jQuery("#pprf-load-more-wrap-"+s+" .pprf-ajax-img").css("display","none"),0!=e.data.length&&jQuery("#panda-repeater-start-from-"+s).val(parseInt(o.start)+parseInt(e.data.length)),jQuery("#pprf-load-more-wrap-"+s+" .pprf-load-more-report").text(" | Loaded "+i)}})}function pprf_odd_even_color_fn(e){jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").removeClass("pprf-purple-bg"),jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").removeClass("pprf-white-bg"),0==jQuery("#panda-repeater-fields-tabs-"+e).length&&jQuery("#panda-repeater-fields-"+e+" .pprf-left-col").each(function(e){e%2==0?jQuery(this).addClass("pprf-white-bg"):jQuery(this).addClass("pprf-purple-bg")}),jQuery("#panda-repeater-fields-"+e+" .pprf-not-trashed").each(function(e){e%2==0?jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-white-bg"):jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-purple-bg")}),jQuery("#panda-repeater-fields-"+e+" .pprf-trashed").each(function(e){e%2==0?jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-white-bg"):jQuery(this).children(".pprf-row").children().children(".pprf-left-col").addClass("pprf-purple-bg")})}function pprf_reassign_fn(e,a,r){console.log(e,a,r),jQuery("#panda-repeater-fields-"+e+"-"+a+' .pprf-redorder-list li[data-id="'+r+'"]').remove(),pprf_odd_even_color_fn(e+"-"+a)}jQuery(".pprf-redorder-btn").click(function(){var e=jQuery(this).data("id");jQuery(this).addClass("hidden"),jQuery(this).parent().children(".pprf-save-redorder-btn").removeClass("hidden"),jQuery(this).parent().children(".pprf-redorder-list-wrap").removeClass("hidden"),jQuery(this).parent().children(".pprf-row").addClass("hidden"),jQuery("#"+e+"-add-new").addClass("hidden")}),jQuery(".pprf-save-redorder-btn").click(function(){var e=jQuery(this).data("id");jQuery(this).addClass("hidden"),jQuery(this).parent().children(".pprf-redorder-list-wrap").addClass("hidden"),jQuery(this).parent().children(".pprf-save-redorder-btn").addClass("hidden"),jQuery(this).parent().children(".pprf-redorder-btn").removeClass("hidden"),jQuery(this).parent().children(".pprf-row").removeClass("hidden"),jQuery("#"+e+"-add-new").removeClass("hidden")}),jQuery(".pprf-load-more-btn").click(function(e){e.preventDefault(),jQuery("#pprf-load-more-wrap-"+jQuery(this).data("target")+" .pprf-ajax-img").css("display","block"),pprf_load_more_fn(jQuery(this).data("target"),jQuery(this))}),jQuery(document).ready(function(s){0!=s(".pprf-redorder-list.pandarf_order").length&&s(".pprf-redorder-list.pandarf_order").sortable({helper:function(e,a){var r=a.children(),d=a.clone();return d.children().each(function(e){s(this).width(r.eq(e).width())}),d},cursor:"move",opacity:.7,tolerance:"intersect",update:function(){var e={action:"admin_pprf_update_order_fn",order:s(this).sortable("toArray"),security:ajax_script.nonce};s.post(ajax_script.ajaxurl,e,function(e){pprf_odd_even_color_fn(e.data.pprf_id)})},cancel:".pprf-row-load-iframe, .pprf-save-btn, pprf-trash-btn",handle:".pprf-left-col"}),s(document.body).on("click",".pprf-row-load-iframe",function(e){e.stopPropagation();var a,r=s(this).data("url"),d=s(this).data("target"),t="panda-repeater-edit-expand-"+d,p="panda-repeater-edit-"+d,i=s(this).parent().children(".pprf-trash-btn");s(this).children(".pprf-edit-span").hasClass("dashicons-update")?pprf_delete_item_fn(i.data("podid"),i.data("postid"),i.data("tb"),i.data("itemid"),i.data("userid"),i.data("iframe_id"),i.data("poditemid"),0):(a=" .pprf-edit",s(this).hasClass("pprf-add")&&(a=".pprf-add",p="panda-repeater-add-new-"+d,t="panda-repeater-add-new-expand-"+d),s("#pprf-row-brief-"+d+" .dashicons").hasClass("dashicons-edit")?(""==s("#"+p).attr("src")&&(s("#"+p).attr("src",r),s("#"+p+"-loader").removeClass("hidden")),s("#"+p).show("slow",function(){s("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-arrow-up"),s("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-edit")}),s("#"+t).show(),s("#"+p).on("load",function(){s("#"+p+"-loader").addClass("hidden"),s("#panda-repeater-save-"+d+"-loader").parent().children(".pprf-save-icon").attr("src",PANDA_PODS_REPEATER_URL+"/images/save-icon.png"),s("#panda-repeater-save-"+d+"-loader").parent().addClass("pprf-btn-ready"),s("#panda-repeater-save-"+d+"-loader").addClass("hidden"),s("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-arrow-up"),s("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-edit")})):(s("#"+p).hide("slow",function(){s("#pprf-row-brief-"+d+a+" .dashicons").removeClass("dashicons-arrow-up"),s("#pprf-row-brief-"+d+a+" .dashicons").addClass("dashicons-edit")}),s("#"+t).hide()),s("#pprf-row-brief-"+d+" .dashicons-trash").removeClass("dashicons-arrow-up"))}),s(document.body).on("click",".pprf-expand-bar",function(){var e=s(this).data("target"),a="panda-repeater-edit-"+e;s(this).hasClass("pprf-add-expand")&&(a="panda-repeater-add-new-"+e),void 0!==document.getElementById(a)&&void 0!==document.getElementById(a).contentWindow.pprf_resize_fn&&document.getElementById(a).contentWindow.pprf_resize_fn()}),s(document.body).on("click",".pprf-trash-btn",function(e){e.stopPropagation();s(this).data("target");s(this).hasClass("pprf-add-expand");var a=0;s(this).hasClass("pprf-btn-not-trashed")&&(a=1),s(this).hasClass("pprf-btn-trashed")&&(a=2),s(this).hasClass("pprf-btn-delete")&&(a=2),pprf_delete_item_fn(s(this).data("podid"),s(this).data("postid"),s(this).data("tb"),s(this).data("itemid"),s(this).data("userid"),s(this).data("iframe_id"),s(this).data("poditemid"),a)}),s(document.body).on("click",".pprf-save-btn",function(e){var a,r;e.stopPropagation(),s(this).hasClass("pprf-btn-ready")&&(r="panda-repeater-edit-"+(a=s(this).data("target")),s(this).hasClass("pprf-save-new-btn")&&(r="panda-repeater-add-new-"+a),s("#panda-repeater-save-"+a+"-loader").removeClass("hidden"),s("#"+r).contents().find(".pods-submit-button").trigger("click"),pprfChanged_bln=!1)}),s(".toplevel_page_panda-pods-repeater-field .pods-field-input").on("click keyup change",function(){pprfChanged_bln=!0}),s("#publishing-action .button, #save-action .button").click(function(e){if(pprfChanged_bln){e.preventDefault();var a=confirm(strs_obj.Ignore_changes);if(1==a&&(pprfChanged_bln=!1,s(this).click()),0==a)return!1}}),s(document.body).on("click",".pprf-tab .dashicons-trash",function(){s("#panda-repeater-fields-"+s(this).parent().data("target")+" .pprf-trashed").css("display","block"),s("#panda-repeater-fields-"+s(this).parent().data("target")+" .pprf-not-trashed").css("display","none"),s(this).parent().parent().children(".active").removeClass("active"),s(this).parent().addClass("active"),pprf_odd_even_color_fn(s(this).parent().data("target"))}),s(document.body).on("click",".pprf-tab .dashicons-portfolio",function(){s("#panda-repeater-fields-"+s(this).parent().data("target")+" .pprf-trashed").css("display","none"),s("#panda-repeater-fields-"+s(this).parent().data("target")+" .pprf-not-trashed").css("display","block"),s(this).parent().parent().children(".active").removeClass("active"),s(this).parent().addClass("active"),pprf_odd_even_color_fn(s(this).parent().data("target"))}),s(document.body).on("click",".pprf-dismiss-btn",function(){s("#li-"+s(this).data("target")+"-repeated").remove()})});var pprfChanged_bln=!1;
//# sourceMappingURL=admin.min.js.map
